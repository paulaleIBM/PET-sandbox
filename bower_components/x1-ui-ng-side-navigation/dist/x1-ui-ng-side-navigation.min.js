angular.module("x1.ui.side-navigation",["pascalprecht.translate","ngAnimate","ui.bootstrap"]);
angular.module("x1.ui.side-navigation").constant("x1.ui.side-navigation.constant",{EVENTS:{sideNavOpened:"x1.ui.side-navigation.opened",sideNavClosed:"x1.ui.side-navigation.closed",sideNavItemClicked:"x1.ui.side-navigation.item.clicked"}});
angular.module("x1.ui.side-navigation").directive("x1SideNavigation",["$state","$stateParams","$animate","$rootScope","$window","x1.ui.side-navigation.constant",function($state,$stateParams,$animate,$rootScope,$window,constant){"use strict";return{restrict:"EA",transclude:!0,templateUrl:"side-navigation/side-navigation.html",scope:{isOpen:"=",items:"=?",isStateful:"=?",selectHeaderChild:"=?"},link:function($scope,element){function isThisEventSupported($event){return"click"===$event.type||13===$event.keyCode}function doesItemExist(item){return item&&item.name}function isTitleClick($event){return!(angular.element($event.target).hasClass("panel")||angular.element($event.target).hasClass("empty-header"))}function fixItems(items,level){level=level||1,angular.forEach(items,function(item){item.active&&setCurrentItem(item),item.level=level,item.state&&!item.validStates&&(item.validStates=[item.state]),item.items&&fixItems(item.items,item.reveal?2:level+1)})}function getTrail(navItems,currentStateName,currentStateParams){function drillDown(items){for(var i=0,len=items.length;len>i;i+=1){var item=items[i];if(navTree.push(item),areStatesEqual(item,currentStateName,currentStateParams)){stateFound=!0;break}if(item.hasOwnProperty("items")&&item.items.length>0&&(drillDown(item.items),stateFound))break;navTree.pop()}}var navTree=[],stateFound=!1;return drillDown(navItems),navTree}function areStatesEqual(item,currentStateName,currentStateParams){if(!item.validStates||item.validStates.indexOf(currentStateName)<0)return!1;for(var i in item.stateParams)if(!currentStateParams.hasOwnProperty(i)||item.stateParams[i]!==currentStateParams[i])return!1;return!0}function setActiveItem(){var trail=getTrail($scope.items,$state.current.name,$stateParams),len=trail.length;if(len>0){var newCurrentItem=trail[len-1];setCurrentItem(newCurrentItem)}for(var i=0;len>i;i+=1){var activeItem=trail[i];activeItem.reveal&&!activeItem.revealOpen&&(activeItem.revealOpen=!0),activeItem.isOpen||(activeItem.isOpen=!0)}len>0&&trail[len-1].items&&unselect(trail[len-1].items)}function setCurrentItem(item){item.header||(currentItem.active=!1,currentItem=item,currentItem.active=!0)}function toggleRevealPanel(item,$event){item.revealOpen=!item.revealOpen,item.revealOpen?(item.active=!0,item.isOpen=!0,$scope.isStateful&&item.state&&"custom"!==$event&&$state.go(item.state,item.stateParams||{})):(item.active=!1,item.isOpen=!1,$scope.isStateful&&item.backState&&"custom"!==$event&&$state.go(item.backState,item.backStateParams||{}))}function unselect(items){angular.forEach(items,function(item){item.active&&(item.active=!1);var itemHasActiveChildren=hasActiveChild(item);item.isOpen&&!itemHasActiveChildren&&(item.isOpen=!1),item.reveal&&item.revealOpen&&!hasActiveChild(item)&&(item.revealOpen=!1),item.items&&unselect(item.items)})}function hasActiveChild(root){var activeChild=!1;if(root.items)for(var items=root.items,i=0,len=items.length;len>i;i+=1){if(items[i].active){activeChild=!0;break}activeChild=activeChild||hasActiveChild(items[i])}return activeChild}var currentItem={};fixItems($scope.items),$scope.$watch("items",function(){fixItems($scope.items)},!0);var container=element.children();$scope.$watch("isOpen",function(newVal){newVal?$animate.removeClass(container,"ng-hide").then(function(){$rootScope.$broadcast(constant.EVENTS.sideNavOpened)}):$animate.addClass(container,"ng-hide").then(function(){$rootScope.$broadcast(constant.EVENTS.sideNavClosed)})}),$scope.select=function($event,item){"custom"!==$event&&$event.stopPropagation(),("custom"===$event||isThisEventSupported($event)&&doesItemExist(item)&&isTitleClick($event))&&(item.header&&item.isOpen&&!doesItemExist(currentItem)&&$scope.selectHeaderChild&&item.items.length&&(item=item.items[0]),setCurrentItem(item),$rootScope.$broadcast(constant.EVENTS.sideNavItemClicked,item),item.reveal?toggleRevealPanel(item,$event):item.externalLink&&$window.open(item.externalLink,item.target||"_blank"),$scope.isStateful&&item.state&&$state.go(item.state,item.stateParams||{}))},$scope.isStateful&&$state.current&&setActiveItem(),$scope.$on("$stateChangeSuccess",function(event,toState){$scope.isStateful&&toState&&setActiveItem()})}}}]);
!function(module){try{module=angular.module("x1.ui.side-navigation")}catch(e){module=angular.module("x1.ui.side-navigation",[])}module.run(["$templateCache",function($templateCache){$templateCache.put("side-navigation/side-navigation.html",'<aside ng-show="isOpen" role="complementary" aria-labelledby="x1SideNavSecondary" class="x1-ui-side-navigation" aria-expanded="{{isOpen}}">\n	<h2 id="x1SideNavSecondary" class="sr-only" translate="x1UiNgSideNavigation.ASIDE_SR_TEXT"></h2>\n	<nav role="navigation" aria-label="{{\'x1UiNgSideNavigation.ARIA.NAV\' | translate}}" ng-include="\'side-navigation/side-navigation.items.html\'" onload="items=items"></nav>\n	<ng-transclude></ng-transclude>\n</aside>')}])}();
!function(module){try{module=angular.module("x1.ui.side-navigation")}catch(e){module=angular.module("x1.ui.side-navigation",[])}module.run(["$templateCache",function($templateCache){$templateCache.put("side-navigation/side-navigation.items.html",'<accordion close-others="false" role="tablist">\n	<accordion-group ng-if="!(item.header && item.items.length < 1)" ng-repeat="item in items" role="tabpanel" class="{{item.class}}" ng-class="{\'active\': item.items && item.level == 1 ? item.isOpen : item.active, \'reveal\': item.reveal,\n			\'reveal-open\': item.revealOpen, \'include\': item.include, \'is-stateful\': $state.current.name === item.state}" is-open="item.isOpen" ng-click="select($event, item)" ng-keydown="select($event, item)" aria-label="{{item.name}}" aria-expanded="{{item.isOpen || false}}">\n\n		<accordion-heading role="tab" tabindex="0" aria-labelledby="{{item.id}}">\n			<span ng-if="item.icon || item.revealOpen" aria-hidden="true" class="heading-icon text-center {{item.class}}">\n				<span ng-class="{\'glyphicon glyphicon-{{item.icon}}\': item.icon,\n						\'glyphicon glyphicon-chevron-left\': item.revealOpen}"></span>\n			</span>\n			<span ng-if="item.items && item.level > 1 && !item.reveal" aria-hidden="true" class="left-icon level{{item.level}} {{item.class}}">\n				<span ng-class="{\'glyphicon glyphicon-chevron-right\': !item.isOpen, \n						\'glyphicon glyphicon-chevron-down\': item.isOpen}"></span>\n			</span>\n			<span ng-if="!item.include" id="{{item.id}}" class="name level{{item.level}} {{item.class}}" title="{{item.name | translate}}">{{item.name | translate}}</span>\n			<span ng-if="item.items && (item.reveal || item.level < 2) && !item.revealOpen && !item.include" aria-hidden="true" class="right-icon {{item.class}}">\n				<span ng-class="{\'glyphicon glyphicon-chevron-down\': !item.isOpen && !item.reveal, \n						\'glyphicon glyphicon-chevron-up\': item.isOpen, \n						\'glyphicon glyphicon-chevron-right\': item.reveal}"></span>\n			</span>\n			<ng-include ng-if="item.include" src="item.include"></ng-include>\n		</accordion-heading>\n\n		<ng-include ng-if="item.items" onload="items=item.items" src="\'side-navigation/side-navigation.items.html\'"></ng-include>\n	</accordion-group>\n</accordion>\n')}])}();