angular.module("x1.ui.popover",["pascalprecht.translate","x1.ui.tooltip","ui.bootstrap.popover","ngSanitize"]);
angular.module("x1.ui.popover").constant("x1.ui.popover.defaults",{animation:!1,container:!1,scrollableContainer:!1,target:!1,placement:"bottom",template:"popover/popover.html",contentTemplate:"popover/popover-content.html",trigger:"click",html:!1,title:"",content:"",delay:0,multiple:!1,className:""}).constant("x1.ui.popover.events",{APPLY_POPOVER:"x1.ui.apply-popover",CANCEL_POPOVER:"x1.ui.cancel-popover",APPLY_PLACEMENT:"x1.ui.apply-placement",POPOVER_CLOSED:"x1.ui.popover.closed",CLOSED_POPOVER:"x1.ui.closed.popover"});
angular.module("x1.ui.popover").controller("popoverCtrl",["$scope","$rootScope","x1.ui.popover.events",function($scope,$rootScope,popoverEvents){"use strict";$scope.accessibleClose=function($event){$event&&13===$event.keyCode?$rootScope.$broadcast(popoverEvents.CANCEL_POPOVER,this):$event&&27===$event.keyCode&&$rootScope.$broadcast(popoverEvents.CANCEL_POPOVER,this)},$scope.accessibleClick=function(item,$event){$event&&13===$event.keyCode?item.handleClick():$event&&27===$event.keyCode&&$rootScope.$broadcast(popoverEvents.CANCEL_POPOVER,this)}}]);
angular.module("x1.ui.popover").directive("x1Popover",["$window","$document","$sce","$x1popover","$rootScope","x1.ui.popover.events",function($window,$document,$sce,$x1popover,$rootScope,popoverEvents){"use strict";var requestAnimationFrame=$window.requestAnimationFrame||$window.setTimeout;return{restrict:"EAC",scope:!0,controller:"popoverCtrl",link:function($scope,element,attr){function closest(element,selector){return element=angular.element(element),element.length?element.hasClass(selector)?element:(element=element.parent(),closest(element,selector)):void 0}function setBindings(){bindListeners(),setElementOffsetWatcher(),bindHandlers()}function removeBindings(){removeListeners(),removeElementOffsetWatcher(),removeHandlers()}function bindListeners(){if(options.outsideClick&&document.addEventListener("click",handleClick,!0),options.keyboard&&document.addEventListener("keyup",handleKeyUp,!0),window.bind("resize",applyPlacement),attr.scrollableContainer){var i,elem,scrollableContainers=attr.scrollableContainer.split(" ");for(i=0;i<scrollableContainers.length;i++)elem=closest(element,scrollableContainers[i]),elem&&(elem.bind("scroll",applyPlacement),scrollTargetsList.push(elem))}}function removeListeners(){removeListenersForHiding(),window.unbind("resize",applyPlacement),scrollTargetsList.length&&(angular.forEach(scrollTargetsList,function(key){key.unbind("scroll",applyPlacement)}),scrollTargetsList=[])}function setElementOffsetWatcher(){elementOffsetWatcher=$scope.$watch(function(){var elementCoords=element[0].getBoundingClientRect();return{left:elementCoords.left,top:elementCoords.top}},applyPlacement,!0)}function removeElementOffsetWatcher(){elementOffsetWatcher&&elementOffsetWatcher()}function bindHandlers(){handlers={},handlers.applyPopover=$scope.$on(popoverEvents.APPLY_POPOVER,function(){popover.$scope.$hide(),popover.$scope.data=$scope,removeBindings()}),handlers.cancelPopover=$scope.$on(popoverEvents.CANCEL_POPOVER,function(event,elem){elem===element||popover.$options.multiple||(popover.$scope.$hide(),removeBindings())}),handlers.applyPlacement=$scope.$on(popoverEvents.APPLY_PLACEMENT,applyPlacement)}function removeHandlers(){if(handlers){for(var handler in handlers)handlers[handler]();handlers=null}}function applyPlacement(){popover&&popover.$isShown&&popover.$applyPlacement()}function isTargetInsidePopover(event){var popoverElement=popover.$element[0];return!element[0].contains(event.target)&&document.body.contains(event.target)&&popoverElement&&!popoverElement.contains(event.target)}function handleClick(event){popover&&isTargetInsidePopover(event)&&hidePopover()}function handleKeyUp(event){popover&&27===event.keyCode&&hidePopover()}function hidePopover(){$scope.close(),$rootScope.$$phase||$scope.$digest()}function removeListenersForHiding(){document.removeEventListener("click",handleClick),document.removeEventListener("keyup",handleKeyUp)}var options,popover,window,handlers,elementOffsetWatcher,scrollTargetsList=[];$scope.isRTL="rtl"===$document[0].dir||"rtl"===$document[0].body.dir,options={scope:$scope},angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","outsideClick"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),angular.forEach(["keyboard","outsideClick"],function(item){options[item]=angular.isDefined(options[item])&&"true"===options[item]}),angular.forEach(["placement","multiple","className"],function(item){$scope.$eval(attr.x1Popover)&&$scope.$eval(attr.x1Popover)[item]?options[item]=$scope.$eval(attr.x1Popover)[item]:angular.isDefined(attr[item])&&($scope[item]=attr[item])}),angular.isDefined(attr.contentHtml)&&(options.content=$sce.trustAsHtml(attr.contentHtml),options.contentTemplate=!1,options.html=!0),angular.isDefined(attr.content)&&(options.content=attr.content,options.contentTemplate=!1),popover=$x1popover(element,options),window=angular.element($window),element.bind("click",function(){popover.$isShown?removeBindings():($rootScope.$broadcast(popoverEvents.CANCEL_POPOVER,element),setBindings())}),angular.forEach(["title","content"],function(key){attr[key]&&attr.$observe(key,function(newValue,oldValue){$scope[key]=$sce.trustAsHtml(newValue),angular.isDefined(oldValue)&&requestAnimationFrame(function(){popover&&popover.$applyPlacement()})})}),attr.x1Popover&&$scope.$watch(attr.x1Popover,function(newValue,oldValue){angular.isObject(newValue)?angular.extend($scope,newValue):$scope.content=newValue,angular.isDefined(oldValue)&&requestAnimationFrame(function(){popover&&popover.$applyPlacement()})},!0),$scope.$on("$destroy",function(){popover&&popover.destroy(),options=null,popover=null,removeBindings(),element.unbind("click")}),$scope.changeLabel=function(label){element.html(label)},$scope.close=function(){popover.$scope.$hide(),$scope.$broadcast(popoverEvents.POPOVER_CLOSED),removeBindings(),$scope.$emit(popoverEvents.CLOSED_POPOVER)}}}}]);
angular.module("x1.ui.popover").provider("$x1popover",["x1.ui.popover.defaults",function(popoverDefaults){"use strict";var defaults=this.defaults=popoverDefaults;this.$get=["$x1tooltip",function($x1tooltip){function popoverFactory(element,config){var options=angular.extend({},defaults,config),$x1popover=$x1tooltip(element,options);return options.content&&($x1popover.$scope.content=options.content),config.placement||($x1popover.$scope.placement=options.placement),$x1popover}return popoverFactory}]}]);
!function(module){try{module=angular.module("x1.ui.popover")}catch(e){module=angular.module("x1.ui.popover",[])}module.run(["$templateCache",function($templateCache){$templateCache.put("popover/popover-content.html",'<div role="menu" class="list-group" aria-label="{{title}} {{\'x1UiNgPopover.ARIA.MENU\' | translate}}"><a ng-repeat="item in items" class="list-group-item" name="{{item.name}}" ng-class="{\'disabled\': item.disabled, \'active\': item.active}" role="menuitem" aria-label="{{item.name}}" ng-click="item.handleClick()" ng-keydown="accessibleClick(item, $event)"><span class="menu-icon glyphicon glyphicon-{{item.icon}}" aria-hidden="true"></span> <span class="item-name">{{item.name}}</span> <span ng-if="item.rarr" aria-hidden="true" class="next-icon glyphicon glyphicon-chevron-right"></span></a></div>')}])}();
!function(module){try{module=angular.module("x1.ui.popover")}catch(e){module=angular.module("x1.ui.popover",[])}module.run(["$templateCache",function($templateCache){$templateCache.put("popover/popover.html",'<div role="tooltip" class="x1-ui-popover popover {{::placement + \' \' + className}}" ng-class="{\'custom-template\': contentTemplate, \'popover-menu\': items}"><div class="arrow" ng-class="{\'has-title\':title || customTitle}" aria-hidden="true"></div><header ng-show="title" class="popover-header" role="banner" aria-labelledby="x1PopoverTitle" ng-class="{\'is-rtl\': isRTL}"><h3 id="x1PopoverTitle" class="popover-title" ng-class="{\'text-right\': isRTL}" ng-bind="title"></h3><button type="button" class="close" ng-click="close()" aria-label="{{\'x1UiNgPopover.ARIA.CLOSE\' | translate}}" title="{{\'x1UiNgPopover.ARIA.CLOSE\' | translate}}" ng-keydown="accessibleClose($event)"><span class="sr-only" translate="x1UiNgModal.ARIA.modalClose"></span> <span class="glyphicon glyphicon-xs glyphicon-remove" aria-hidden="true"></span></button></header><section role="region" aria-label="{{title}} {{\'x1UiNgPopover.ARIA.CONTENT\' | translate}}" class="popover-content" ng-bind="content"></section></div>')}])}();